<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script src="./node_modules/web3/dist/web3.js"></script>
        <script src="./node_modules/jquery/dist/jquery.js"></script>
    </head>
    <body>
        <h1>ETHER Wallet</h1>
        <!-- 계정별 잔액 현황 -->
        <table>
            <tr>
                <td><tr><b>계정 잔액</b></tr></td>

                <td>합계</td>
                <td>4000</td>
            </tr>
        </table>
        <div id="divStatus"></div>
        <p><span>보내는 사람</span>
            <select class="accountsList" id="fromAccounts"><option value="">선택하세요</option></select>
        </p>
        <p><span>받는 사람</span>
            <select class="accountsList" id="toAccounts"><option value="">선택하세요</option></select>
        </p>
        <p><span>송금액</span>
            <input id="amount" type="number" /> ETHER</p></td>
        </p>
        <p><span>패스워드</span>
            <input id="formPassword" type="password" /><button id="btnSend">송금</button>
        </p>
        <style>
            * { font-size: 20px; }
        #divStatus, .accountsList { font-family: consolas; font-size: 11pt; }
        #divStatus table { border-collapse: collapse; border: 1px; }
        span { display: inline-block; width: 120px; text-align: right; }
        </style>

        <script type="text/javascript">
            var Web3 = require("web3");
            var web3 = new Web3();
            web3.setProvider(new web3.providers.HttpProvider("http://localhost:8545"));

            function setAccountsList() {
                var accoutns = web3.eth.accounts;
                for (var i = 0; i < accoutns.length; i++){
                    var account = accounts[i];
                    $('accountsList').append('<option value="'+account+'"">'+account+'</option>')
                }
            }
            
            function showStatus() {
                var table = '<table id="tblStatus" border="1"><tr><th>계정</th><th>잔고</th></tr></table>';
                $('#divStatus').empty();
                $('#divStatus').append(table);

                var total = 0;
                var accounts = web3.eth.accounts;
                for (var i = 0; i < accounts.length; i ++ ) {
                    var account = accounts[i];
                    var balance = parseFloat(web3.fromWei(web3.eth.getBalance(account), 'ether'))
                    total += balance;
                    $('#tblStatus').append('<tr><td>'+account+'</td><td align="right">'+balance+'</td></tr>');
                }
                $('#tblStatus').append('<tr><th>총액</th><td align="right">'+total+'</td></tr>');
            }
        
        
        </script>












    </body>
</html>